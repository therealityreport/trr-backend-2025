from dotenv import load_dotenv, find_dotenv
# Force-load .env so values there win over an empty/inherited environment
load_dotenv(find_dotenv(usecwd=True), override=True)

    api_key = os.environ.get("FIRECRAWL_API_KEY")
    if api_key:
        api_key = api_key.strip().strip('"\'')  # remove surrounding quotes/spaces if present
    if not api_key:
        print("üîé DEBUG: FIRECRAWL_API_KEY not visible in os.environ after load_dotenv().")
        print("üîé DEBUG: Searched .env path:", find_dotenv(usecwd=True))
        raise RuntimeError("FIRECRAWL_API_KEY not set (define it in .env or environment)")
    self.fc = FirecrawlApp(api_key=api_key)

    masked = (os.environ.get("FIRECRAWL_API_KEY") or "").strip()
    if masked:
        print("üîê FIRECRAWL_API_KEY loaded: fc-" + "‚Ä¢" * max(0, len(masked) - 3))
    else:
        print("‚ö†Ô∏è FIRECRAWL_API_KEY is empty at start.")
